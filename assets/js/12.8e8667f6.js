(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{514:function(s,a,t){s.exports=t.p+"assets/img/1.abf3434f.jpg"},540:function(s,a,t){"use strict";t.r(a);var e=t(2),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",[s._v("OpenSSL生成的秘钥与java RSA加解密类生成的秘钥类型不一致, 导致加载秘钥失败. 通过引入一个工具包. 来实现加解密")])]),s._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#_1-生成秘钥"}},[s._v("1. 生成秘钥")]),e("ul",[e("li",[e("a",{attrs:{href:"#_1-1-使用-openssl-生成秘钥"}},[s._v("1.1 使用`OpenSSL`生成秘钥")])]),e("li",[e("a",{attrs:{href:"#_1-2-查看私钥"}},[s._v("1.2 查看私钥")])]),e("li",[e("a",{attrs:{href:"#_1-3-生成查看公钥"}},[s._v("1.3 生成查看公钥")])]),e("li",[e("a",{attrs:{href:"#_1-4-加解密引入包"}},[s._v("1.4 加解密引入包")])]),e("li",[e("a",{attrs:{href:"#_1-5-加解密代码"}},[s._v("1.5 加解密代码")])]),e("li",[e("a",{attrs:{href:"#_1-6-rsa-秘钥类型说明"}},[s._v("1.6 `RSA`秘钥类型说明")])])])]),e("li",[e("a",{attrs:{href:"#_2-rsa-格式转换"}},[s._v("2 `RSA`格式转换")]),e("ul",[e("li",[e("a",{attrs:{href:"#_2-1-生成-pkcs1-私钥"}},[s._v("2.1 生成`PKCS1`私钥")])]),e("li",[e("a",{attrs:{href:"#_2-2-pkcs1-私钥转换为-pkcs8"}},[s._v("2.2 `PKCS1`私钥转换为`PKCS8`")])]),e("li",[e("a",{attrs:{href:"#_2-3-pkcs8-私钥转换为-pkcs1"}},[s._v("2.3 `PKCS8`私钥转换为`PKCS1`")])]),e("li",[e("a",{attrs:{href:"#_2-4-从-pkcs1-私钥中生成-pkcs8-公钥"}},[s._v("2.4 从`PKCS1`私钥中生成`PKCS8`公钥")])]),e("li",[e("a",{attrs:{href:"#_2-5-从-pkcs8-私钥中生成-pkcs8-公钥"}},[s._v("2.5 从`PKCS8`私钥中生成`PKCS8`公钥")])]),e("li",[e("a",{attrs:{href:"#_2-6-从-pkcs8-公钥转换-pkcs1-公钥"}},[s._v("2.6 从`PKCS8`公钥转换`PKCS1`公钥")])]),e("li",[e("a",{attrs:{href:"#_2-7-从-pkcs1-公钥转换-pkcs8-公钥"}},[s._v("2.7 从`PKCS1`公钥转换`PKCS8`公钥")])])])])])]),e("p"),s._v(" "),e("h2",{attrs:{id:"_1-生成秘钥"}},[s._v("1. 生成秘钥")]),s._v(" "),e("h3",{attrs:{id:"_1-1-使用openssl生成秘钥"}},[s._v("1.1 使用"),e("code",[s._v("OpenSSL")]),s._v("生成秘钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl genrsa -out rsa_private_key.pem "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:t(514),alt:"生成秘钥"}})]),s._v(" "),e("h3",{attrs:{id:"_1-2-查看私钥"}},[s._v("1.2 查看私钥")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("-----BEGIN RSA PRIVATE KEY-----\nMIICXgIBAAKBgQCtSXcCfb5pJ/CrOWDAdHVEO8wzoj/Waskia3T9nBOXJKbf1TqT\nS7bn8m/2kn/bx0p8FuK+LcH2TeCNa5DXyCE+k+qkqCXTI6U48aSKjzZ0eiCPRDm0\nZfdCJoB3l7rxOx2jO/EXtjXC3VrX0vddjR/3AGDm/TUmlIkm0IpHzdPSAwIDAQAB\nAoGBAI0KxKD0c+znI05aL1O19lSJT1Wfc9IzrG4lhF1/kbptjJ2W0kxdTgxQGa1Z\n5FOgTBHgFsGwQLUXAfRZXtUjAVq0sEVFzM0rWRr8B63UFokY198jL/1XgcgAp8jP\nBbJRI1Mp/TdNtsdkK4bE/6pJsZrlLCpsA9uz91AaddN60bhRAkEA2t3Sk1aqfwSP\nDelwv96nFwgb8XbZ5i4BgHp4UDFyoW/g6VhaLEOyM+VBUOK4iVKaNOZdtdFazlrS\nNhFY18iyxwJBAMqv9LZNeDajQ2Hju1B8/ZV2plCROh8Jvy7Dike6BI/NvVgm/h9O\ndsZzqenlMX24232Sl4WnUBH+gr6DzwsO6uUCQQCroMdAQvXwJOMJRcXkr/TXWsSO\n1WSJ3AnRdjhiqmP5tIHqeh48F9nmWCCgDSoohV3nnb5elY1fxFiTjYbdr8SBAkBW\nMBRDIRYpRat1iL0yMLQ0Rkvanqa0ZBSj8gpvDa6656XIQmx1K4xePvjVuNwetei/\nsQI1lzv5Kty13p6/+QvxAkEArSPbBXRhFKVKiR9tvvz87UYA4bchiuDseGWhqB6H\n37grzW5eGPfd8CAoJKWp2CmZa1Ad86+YRXvWwKhE5/vBpg==\n-----END RSA PRIVATE KEY-----\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("h3",{attrs:{id:"_1-3-生成查看公钥"}},[s._v("1.3 生成查看公钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl rsa -in rsa_private_key.pem -out rsa_public_key_1024.pub -pubout\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCtSXcCfb5pJ/CrOWDAdHVEO8wz\noj/Waskia3T9nBOXJKbf1TqTS7bn8m/2kn/bx0p8FuK+LcH2TeCNa5DXyCE+k+qk\nqCXTI6U48aSKjzZ0eiCPRDm0ZfdCJoB3l7rxOx2jO/EXtjXC3VrX0vddjR/3AGDm\n/TUmlIkm0IpHzdPSAwIDAQAB\n-----END PUBLIC KEY-----\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"_1-4-加解密引入包"}},[s._v("1.4 加解密引入包")]),s._v(" "),e("div",{staticClass:"language-xml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-xml"}},[e("code",[s._v("    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("org.bouncycastle"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("bcprov-jdk15on"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("1.56"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"_1-5-加解密代码"}},[s._v("1.5 加解密代码")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('import lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.codec.binary.Base64;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\nimport javax.crypto.Cipher;\nimport java.nio.charset.StandardCharsets;\nimport java.security.KeyFactory;\nimport java.security.interfaces.RSAPrivateKey;\nimport java.security.interfaces.RSAPublicKey;\nimport java.security.spec.RSAPrivateKeySpec;\nimport java.security.spec.X509EncodedKeySpec;\n\n@Component\n@Slf4j\npublic class RSAUtil {\n\n    @Value("${config.rsa.privateKey}")\n    private String privateKey;\n    @Value("${config.rsa.publicKey}")\n    private String publicKey;\n\n    public static void main(String[] args) {\n        RSAUtil rsaUtil = new RSAUtil();\n        rsaUtil.publicKey = "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCtSXcCfb5pJ/CrOWDAdHVEO8wzoj/Waskia3T9nBOXJKbf1TqTS7bn8m/2kn/bx0p8FuK+LcH2TeCNa5DXyCE+k+qkqCXTI6U48aSKjzZ0eiCPRDm0ZfdCJoB3l7rxOx2jO/EXtjXC3VrX0vddjR/3AGDm/TUmlIkm0IpHzdPSAwIDAQAB";\n\n        rsaUtil.privateKey = "MIICXgIBAAKBgQCtSXcCfb5pJ/CrOWDAdHVEO8wzoj/Waskia3T9nBOXJKbf1TqTS7bn8m/2kn/bx0p8FuK+LcH2TeCNa5DXyCE+k+qkqCXTI6U48aSKjzZ0eiCPRDm0ZfdCJoB3l7rxOx2jO/EXtjXC3VrX0vddjR/3AGDm/TUmlIkm0IpHzdPSAwIDAQABAoGBAI0KxKD0c+znI05aL1O19lSJT1Wfc9IzrG4lhF1/kbptjJ2W0kxdTgxQGa1Z5FOgTBHgFsGwQLUXAfRZXtUjAVq0sEVFzM0rWRr8B63UFokY198jL/1XgcgAp8jPBbJRI1Mp/TdNtsdkK4bE/6pJsZrlLCpsA9uz91AaddN60bhRAkEA2t3Sk1aqfwSPDelwv96nFwgb8XbZ5i4BgHp4UDFyoW/g6VhaLEOyM+VBUOK4iVKaNOZdtdFazlrSNhFY18iyxwJBAMqv9LZNeDajQ2Hju1B8/ZV2plCROh8Jvy7Dike6BI/NvVgm/h9OdsZzqenlMX24232Sl4WnUBH+gr6DzwsO6uUCQQCroMdAQvXwJOMJRcXkr/TXWsSO1WSJ3AnRdjhiqmP5tIHqeh48F9nmWCCgDSoohV3nnb5elY1fxFiTjYbdr8SBAkBWMBRDIRYpRat1iL0yMLQ0Rkvanqa0ZBSj8gpvDa6656XIQmx1K4xePvjVuNwetei/sQI1lzv5Kty13p6/+QvxAkEArSPbBXRhFKVKiR9tvvz87UYA4bchiuDseGWhqB6H37grzW5eGPfd8CAoJKWp2CmZa1Ad86+YRXvWwKhE5/vBpg==";\n        System.out.println(rsaUtil.encrypt("李四"));\n        System.out.println(rsaUtil.encrypt("123456789012345678"));\n        System.out.println("李四".equals(rsaUtil.decrypt(rsaUtil.encrypt("李四"))));\n    }\n\n    public String encrypt(String str) {\n        try {\n            //base64编码的公钥\n            byte[] decoded = Base64.decodeBase64(publicKey);\n            RSAPublicKey pubKey = (RSAPublicKey) KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(decoded));\n            //RSA加密\n            Cipher cipher = Cipher.getInstance("RSA");\n            cipher.init(Cipher.ENCRYPT_MODE, pubKey);\n            return Base64.encodeBase64String(cipher.doFinal(str.getBytes(StandardCharsets.UTF_8)));\n        } catch (Exception e) {\n            log.error("encrypt failed: str[" + str + "], publicKey[" + publicKey + "]");\n            throw new RunTimeException("解密失败", e);\n        }\n    }\n\n    public String decrypt(String str) {\n        try {\n            //64位解码加密后的字符串\n            byte[] inputByte = Base64.decodeBase64(str.getBytes(StandardCharsets.UTF_8));\n            //base64编码的私钥\n            byte[] decoded = Base64.decodeBase64(privateKey);\n            org.bouncycastle.asn1.pkcs.RSAPrivateKey rsaPrivateKey = org.bouncycastle.asn1.pkcs.RSAPrivateKey.getInstance(decoded);\n            RSAPrivateKeySpec rsaPrivKeySpec = new RSAPrivateKeySpec(rsaPrivateKey.getModulus(), rsaPrivateKey.getPrivateExponent());\n            RSAPrivateKey priKey = (RSAPrivateKey) KeyFactory.getInstance("RSA").generatePrivate(rsaPrivKeySpec);\n            //RSA解密\n            Cipher cipher = Cipher.getInstance("RSA");\n            cipher.init(Cipher.DECRYPT_MODE, priKey);\n            return new String(cipher.doFinal(inputByte));\n        } catch (Exception e) {\n            log.error("decrypt failed: str[" + str + "], privateKey[" + publicKey + "]", e);\n            throw new RunTimeException("解密失败", e);\n        }\n    }\n}\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br")])]),e("h3",{attrs:{id:"_1-6-rsa秘钥类型说明"}},[s._v("1.6 "),e("code",[s._v("RSA")]),s._v("秘钥类型说明")]),s._v(" "),e("p",[s._v("公钥加密标准（Public Key Cryptography Standards, PKCS）")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("PKCS")]),s._v(" "),e("th",[s._v("版本")]),s._v(" "),e("th",[s._v("名称")]),s._v(" "),e("th",[s._v("简介")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("PKCS #1 [^1]")]),s._v(" "),e("td",[s._v("2.1")]),s._v(" "),e("td",[s._v("RSA密码编译标准（RSA Cryptography Standard）")]),s._v(" "),e("td",[s._v("定义了RSA的数理基础、公/私钥格式，以及加/解密、签/验章的流程。1.5版本曾经遭到攻击。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #2")]),s._v(" "),e("td",[s._v("-")]),s._v(" "),e("td",[s._v("撤销")]),s._v(" "),e("td",[s._v("原本是用以规范RSA加密摘要的转换方式，现已被纳入PKCS#1之中。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #3")]),s._v(" "),e("td",[s._v("1.4")]),s._v(" "),e("td",[s._v("DH密钥协议标准（Diffie-Hellman key agreement Standard）")]),s._v(" "),e("td",[s._v("规范以DH密钥协议为基础的密钥协议标准。其功能，可以让两方通过金议协议，拟定一把会议密钥(Session key)。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #4")]),s._v(" "),e("td",[s._v("-")]),s._v(" "),e("td",[s._v("撤销")]),s._v(" "),e("td",[s._v("原本用以规范转换RSA密钥的流程。已被纳入PKCS#1之中。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #5")]),s._v(" "),e("td",[s._v("2.0")]),s._v(" "),e("td",[s._v("密码基植加密标准（Password-based Encryption Standard）")]),s._v(" "),e("td",[s._v("参见RFC 2898与PBKDF2。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #6")]),s._v(" "),e("td",[s._v("1.5")]),s._v(" "),e("td",[s._v("证书扩展语法标准（Extended-Certificate Syntax Standard）")]),s._v(" "),e("td",[s._v("将原本X.509的证书格式标准加以扩充。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #7")]),s._v(" "),e("td",[s._v("1.5")]),s._v(" "),e("td",[s._v("密码消息语法标准（Cryptographic Message Syntax Standard）")]),s._v(" "),e("td",[s._v("参见RFC 2315。规范了以公开密钥基础设施（PKI）所产生之签名/密文之格式。其目的一样是为了拓展数字证书的应用。其中，包含了S/MIME与CMS。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #8 [^2]")]),s._v(" "),e("td",[s._v("1.2")]),s._v(" "),e("td",[s._v("私钥消息表示标准（Private-Key Information Syntax Standard）.")]),s._v(" "),e("td",[s._v("Apache读取证书私钥的标准。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #9")]),s._v(" "),e("td",[s._v("2.0")]),s._v(" "),e("td",[s._v("选择属性格式（Selected Attribute Types）")]),s._v(" "),e("td",[s._v("定义PKCS#6、7、8、10的选择属性格式。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #10")]),s._v(" "),e("td",[s._v("1.7")]),s._v(" "),e("td",[s._v("证书申请标准（Certification Request Standard）\t参见RFC 2986。")]),s._v(" "),e("td",[s._v("规范了向证书中心申请证书之CSR（certificate signing request）的格式。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #11")]),s._v(" "),e("td",[s._v("2.20")]),s._v(" "),e("td",[s._v("密码设备标准接口（Cryptographic Token Interface (Cryptoki)）")]),s._v(" "),e("td",[s._v("定义了密码设备的应用程序接口（API）之规格。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #12")]),s._v(" "),e("td",[s._v("1.0")]),s._v(" "),e("td",[s._v("个人消息交换标准（Personal Information Exchange Syntax Standard）")]),s._v(" "),e("td",[s._v("定义了包含私钥与公钥证书（public key certificate）的文件格式。私钥采密码(password)保护。常见的PFX就履行了PKCS#12。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #13")]),s._v(" "),e("td",[s._v("–")]),s._v(" "),e("td",[s._v("椭圆曲线密码学标准（Elliptic curve cryptography Standard）")]),s._v(" "),e("td",[s._v("制定中。规范以椭圆曲线密码学为基础所发展之密码技术应用。椭圆曲线密码学是新的密码学技术，其强度与效率皆比现行以指数运算为基础之密码学算法来的优秀。然而，该算法的应用尚不普及。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #14")]),s._v(" "),e("td",[s._v("–")]),s._v(" "),e("td",[s._v("拟随机数产生器标准（Pseudo-random Number Generation）")]),s._v(" "),e("td",[s._v("制定中。规范拟随机数产生器的使用与设计。")])]),s._v(" "),e("tr",[e("td",[s._v("PKCS #15")]),s._v(" "),e("td",[s._v("1.1")]),s._v(" "),e("td",[s._v("密码设备消息格式标准（Cryptographic Token Information Format Standard）")]),s._v(" "),e("td",[s._v("定义了密码")])])])]),s._v(" "),e("p",[s._v("[^1]:"),e("code",[s._v("PKCS #1")]),s._v("为"),e("code",[s._v("OpenSSH")]),s._v("默认使用的加密标准"),e("br"),s._v("\n[^2]:"),e("code",[s._v("PKCS #8")]),s._v("为"),e("code",[s._v("Java")]),s._v("默认使用的加密标准")]),s._v(" "),e("p",[s._v("java默认使用的RSAKey")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('byte[] decoded = Base64.decodeBase64(publicKey);\nRSAPublicKey pubKey = (RSAPublicKey) KeyFactory.getInstance("RSA").generatePublic(new X509EncodedKeySpec(decoded));\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"_2-rsa格式转换"}},[s._v("2 "),e("code",[s._v("RSA")]),s._v("格式转换")]),s._v(" "),e("h3",{attrs:{id:"_2-1-生成pkcs1私钥"}},[s._v("2.1 生成"),e("code",[s._v("PKCS1")]),s._v("私钥")]),s._v(" "),e("p",[e("code",[s._v("OpenSSL")]),s._v("生成"),e("code",[s._v("PKCS1")]),s._v("格式的私钥，密钥长度1024位")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl genrsa -out private.pem "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-2-pkcs1私钥转换为pkcs8"}},[s._v("2.2 "),e("code",[s._v("PKCS1")]),s._v("私钥转换为"),e("code",[s._v("PKCS8")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl pkcs8 -topk8 -inform PEM -in private.pem -outform pem -nocrypt -out pkcs8.pem\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-3-pkcs8私钥转换为pkcs1"}},[s._v("2.3 "),e("code",[s._v("PKCS8")]),s._v("私钥转换为"),e("code",[s._v("PKCS1")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl rsa -in pkcs8.pem -out pkcs1.pem\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-4-从pkcs1私钥中生成pkcs8公钥"}},[s._v("2.4 从"),e("code",[s._v("PKCS1")]),s._v("私钥中生成"),e("code",[s._v("PKCS8")]),s._v("公钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl rsa -in private.pem -pubout -out public.pem\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_2-5-从pkcs8私钥中生成pkcs8公钥"}},[s._v("2.5 从"),e("code",[s._v("PKCS8")]),s._v("私钥中生成"),e("code",[s._v("PKCS8")]),s._v("公钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl rsa -in pkcs8.pem -pubout -out public_pkcs8.pem\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("与2.4生成的结果一致")]),s._v(" "),e("h3",{attrs:{id:"_2-6-从pkcs8公钥转换pkcs1公钥"}},[s._v("2.6 从"),e("code",[s._v("PKCS8")]),s._v("公钥转换"),e("code",[s._v("PKCS1")]),s._v("公钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl rsa -pubin -in public_pkcs8.pem -RSAPublicKey_out\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("生成前后文件一致")]),s._v(" "),e("h3",{attrs:{id:"_2-7-从pkcs1公钥转换pkcs8公钥"}},[s._v("2.7 从"),e("code",[s._v("PKCS1")]),s._v("公钥转换"),e("code",[s._v("PKCS8")]),s._v("公钥")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("openssl rsa -RSAPublicKey_in -in pub_pkcs1.pem -pubout\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("生成前后文件一致")])])}),[],!1,null,null,null);a.default=n.exports}}]);